{% extends "base.html" %}
{% block title %}D·ª± ƒëo√°n c·ª•m{% endblock %}
{% block content %}

<h2 class="dashboard-title mb-4">üîÆ D·ª± ƒëo√°n c·ª•m kh√°ch h√†ng m·ªõi</h2>

<style>
    .clean-input {
        width: 100%;
        padding: 12px 14px;
        font-size: 16px;
        border-radius: 10px;
        border: 1px solid #cbd5e1;
        background: #ffffffaa;
        transition: 0.18s ease;
    }
    .clean-input:hover {
        border-color: #94a3b8;
    }
    .clean-input:focus {
        border-color: #3b82f6;
        background: white;
        box-shadow: 0 0 0 2px rgba(59,130,246,0.25);
        outline: none;
    }
    .input-label {
        font-weight: 600;
        margin-bottom: 6px;
        color: #334155;
    }
    .predict-card {
        padding: 28px;
        border-radius: 16px;
        background: white;
        box-shadow: 0 4px 20px rgba(0,0,0,0.06);
    }
</style>

<div class="predict-card">
    <p class="text-muted mb-4">
        Nh·∫≠p c√°c th√¥ng s·ªë RFM m·ªü r·ªông ƒë·ªÉ d·ª± ƒëo√°n c·ª•m kh√°ch h√†ng.
    </p>

    <form method="POST" id="predictForm" class="mt-2">
        {% for f in ["Recency","Frequency","Monetary","TotalQuantity","AvgUnitPrice"] %}
        <div class="mb-3">
            <label class="input-label">{{ f }}</label>
            <input class="clean-input" name="{{ f }}" placeholder="Nh·∫≠p {{ f }}..." required>
        </div>
        {% endfor %}

        <button class="btn btn-success btn-lg w-100 mt-3">
            üîç D·ª± ƒëo√°n
        </button>
    </form>

    {% if result is not none %}
    <script>
        setTimeout(() => {
            const box = document.getElementById("result-box");
            box.scrollIntoView({ behavior: "smooth" });
        }, 200);
    </script>

    <div id="result-box" class="mt-4">

        <div class="alert alert-success fs-5 fw-bold text-center">
            üéâ D·ª± ƒëo√°n th√†nh c√¥ng!
        </div>

        <div class="alert alert-primary p-4">
            <h4 class="text-center mb-3">
                ‚ú® Kh√°ch h√†ng thu·ªôc c·ª•m: <b>{{ result }}</b>
            </h4>

            <hr>

            <p class="mt-3 mb-1">
                <b>M√¥ t·∫£:</b>
                <span>{{ cluster_desc }}</span>
            </p>
        </div>
    </div>
    {% endif %}
</div>

{% endblock %}